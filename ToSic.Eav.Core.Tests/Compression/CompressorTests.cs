using System.Diagnostics;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using ToSic.Eav.Compression;

namespace ToSic.Eav.Core.Tests.Compression
{
    [TestClass()]
    public class CompressorTests
    {
        private const string JsonTest = "{\"_\":{\"V\":1},\"Entity\":{\"Id\":203685,\"Version\":4,\"Guid\":\"e79629d7-8b02-476e-9329-971bc3c35b2e\",\"Type\":{\"Name\":\"BlogPost\",\"Id\":\"ed31a7c6-e76c-4874-958f-d67f33c02c34\"},\"Attributes\":{\"String\":{\"Content\":{\"en-us\":\"<p>This page collects all the changes of all versions into one place, making it easier to search for certain keywords.</p>\"},\"CropAnchor\":{\"en-us\":\"middlecenter\"},\"MetaDescription\":{\"en-us\":\"\"},\"MetaTitle\":{\"en-us\":\"\"},\"SharingDescription\":{\"en-us\":\"\"},\"Teaser\":{\"en-us\":\"<p>This page collects all the changes of all versions into one place, making it easier to search for certain keywords.</p>\\n<p>\\uD83D\\uDC49 if you only care about breaking, please check&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/changes-breaking.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Breaking Changes Overview for 2sxc/EAV</a></p>\\n<hr />\\n<h2 id=\\\"breaking-changes-in-eav-and-2sxc-v14\\\">Breaking Changes in EAV and 2sxc v14</h2>\\n<p>We try to minimize breaking changes, and most breaking changes won't affect your work, because it's internal API. We're documenting it here to ensure you know what happened, in case you still run into this.</p>\\n<h3 id=\\\"summary\\\">Summary</h3>\\n<p>V14 did some clean-up of internal APIs, but otherwise there are no known breaking changes.</p>\\n<p>Note that these changes could be seen as a breaking change for certain users:</p>\\n<ol>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/change-in-app-zip-package.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Change in App Zip Package in v14.<wbr />08</a>&nbsp;<em>v14.08</em></li>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/change-in-app-data-folder.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Change in App Data Folder in v14.<wbr />08</a>&nbsp;<em>v14.08</em></li>\\n</ol>\\n<h2 id=\\\"all-changes-v14\\\">All Changes V14</h2>\\n<h3 id=\\\"1400---140704\\\">14.00 - 14.07.04</h3>\\n<p>TODO NOT YET DOCUMENTED - CHECK THE GITHUB PROJECT</p>\\n<h3 id=\\\"140705\\\">14.07.05</h3>\\n<ul>\\n<li>ToolbarBuilder now has&nbsp;<code>Group</code>&nbsp;command</li>\\n<li>Toolbar Buttons can now use SVGs for icons (usually base64 encoded)</li>\\n<li>...</li>\\n</ul>\\n<h2 id=\\\"important-changes\\\">Important Changes</h2>\\n<ol>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/issue-assembly-binding.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Assembly Binding Issue on Installs from 2sxc 13.<wbr />04 to 14.<wbr />02</a></li>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/change-in-app-zip-package.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Change in App Zip Package in v14.<wbr />08</a>&nbsp;<em>v14.08</em></li>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/change-in-app-data-folder.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Change in App Data Folder in v14.<wbr />08</a>&nbsp;<em>v14.08</em></li>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v14/export-exclude-in-app-json.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">New app.<wbr />json with Export Exclude</a>&nbsp;<em>v14.09</em></li>\\n</ol>\\n<hr />\\n<h2 id=\\\"version-13\\\">Version 13</h2>\\n<p>TODO</p>\\n<ol>\\n<li>New WebApi route&nbsp;<code>app/auto/data</code>&nbsp;to replace&nbsp;<code>/app/auto/content</code>&nbsp;- the old one will still work, but we won't document it any more, because it was a confusing name</li>\\n<li>Lots of metadata stuff... TODO:</li>\\n<li>New&nbsp;<code>sxc.data</code>&nbsp;and&nbsp;<code>sxc.query</code></li>\\n</ol>\\n<h3 id=\\\"breaking-changes-in-2sxc-1300\\\">Breaking Changes in 2sxc 13.00</h3>\\n<h4 id=\\\"api-changes-that-may-affect-you\\\">API Changes that may affect you</h4>\\n<ol>\\n<li>An old, non-DI feature for Inner Content is being deprecated and will be removed in v14<br /><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/sxc-static-render/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n<li>An old feature for publishing module&nbsp;<em>InstanceData</em>&nbsp;as JSON is removed<br /><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/instance-data/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n<li>An old feature to create&nbsp;<em>DataSources</em>&nbsp;is removed<br /><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/datasource/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n<li>Two old data-conversion features&nbsp;<em>DataToDictionary</em>&nbsp;and&nbsp;<em>EntitiesToDictionary</em>&nbsp;were removed<br /><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/conversion/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n<li>Some internal functionality which enabled&nbsp;<code>IEntity</code>&nbsp;objects to convert links containing&nbsp;<code>file:...</code>&nbsp;and&nbsp;<code>page:...</code>&nbsp;has been removed. This only affects special deep code calls on&nbsp;<code>IEntity</code>&nbsp;and does _not affect&nbsp;<code>DynamicEntity</code>&nbsp;objects in Razor&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/ientity-links/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n<li>\\n<p>The old feature&nbsp;<code>Eav.Factory.Resolve&lt;T&gt;()</code>&nbsp;was deprecated and will be removed in v14<br /><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/eav-factory/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></p>\\n</li>\\n<li>\\n<p>The old feature&nbsp;<code>BlockDataSource.Cache.GetContentType(...)</code>&nbsp;was removed&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/datasource.cache/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></p>\\n</li>\\n<li>The Dnn Static&nbsp;<code>ToSic.Sxc.Dnn.Factory</code>&nbsp;is being deprecated and will be removed in v14&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/abyss/releases/history/v13/dnn-factory/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">see instructions</a></li>\\n</ol>\\n<h4 id=\\\"major-updates-with-may-affect-you\\\">Major Updates with may affect you</h4>\\n<ol>\\n<li>The Image Resizer is being replaced with&nbsp;<a href=\\\"https://www.imageflow.io/\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">ImageFlow</a></li>\\n<li>The App containing Site-wide settings is changed to&nbsp;<code>Primary</code>&nbsp;- previously it used the&nbsp;<code>Content</code>&nbsp;app for this. We believe this won't affect many users, as the settings-stack is still very new in v12</li>\\n</ol>\\n<p>Things which probably don't affect anybody</p>\\n<ol>\\n<li>SQL changes - minor updates to the Database</li>\\n<li>.net Framework and Dll Updated to Match Dnn 9 Requirements - but still works in Dnn 7.4.2\\n<ol>\\n<li>.net Framework 4.7.2 now required (previously .net Framework 4.5.1)</li>\\n<li>.net Standard 2.0.3 required (previously .net Standard 1.6)<br /><strong>Important</strong>: This will be referenced in the&nbsp;<code>web.config</code>&nbsp;upon installation</li>\\n<li>Dependency Injection updated to .net core 2.1.1 (previously 1.1)</li>\\n<li>Newtonsoft.Json updated to v10.0.3</li>\\n</ol>\\n</li>\\n<li>Entity Framework updated to 2.1.1 (previously 1.1) - Oqtane is unmodified and uses 3.1.4</li>\\n<li>Dnn DLLs renamed\\n<ol>\\n<li><code>ToSic.Sxc.Dnn.dll</code>&nbsp;became&nbsp;<code>ToSic.Sxc.Dnn.Core.dll</code>&nbsp;for consistency</li>\\n<li><code>ToSic.SexyContent.WebApi.dll</code>&nbsp;became&nbsp;<code>ToSic.Sxc.Dnn.WebApi.dll</code></li>\\n<li><code>ToSic.SexyContent.Razor.dll</code>&nbsp;became&nbsp;<code>ToSic.Sxc.Dnn.Razor.dll</code></li>\\n</ol>\\n</li>\\n<li>An internal object&nbsp;<code>ToSic.Eav.Apps.State</code>&nbsp;was removed</li>\\n</ol>\\n<p>Internal APIs which were removed</p>\\n<ol>\\n<li>Static&nbsp;<code>ToSic.Eav.Data.Builder.AttribBuilder.AddValue(...)</code></li>\\n</ol>\\n<h3 id=\\\"1301\\\">13.01</h3>\\n<ul>\\n<li>JSON fields</li>\\n<li>Link.Image with srcSet Parameter ?</li>\\n<li>ToSic.Sxc.Services.IFeaturesService</li>\\n</ul>\\n<h3 id=\\\"1302\\\">13.02</h3>\\n<ul>\\n<li>JS</li>\\n<li>Global Apps</li>\\n</ul>\\n<h3 id=\\\"1303-todo\\\">13.03 TODO</h3>\\n<h3 id=\\\"1304-todo\\\">13.04 TODO</h3>\\n<h3 id=\\\"1305\\\">13.05</h3>\\n<ul>\\n<li>Moved the&nbsp;<code>Web.IInPageEditingHelper</code>&nbsp;to&nbsp;<code>Services.IEditService</code>&nbsp;- this is non breaking and shouldn't matter, as people won't be using the direct inteface</li>\\n<li>Moved the&nbsp;<code>Web.ILinkHelper</code>&nbsp;to&nbsp;<code>Services.ILinkService</code>&nbsp;- this is non breaking and shouldn't matter, as people won't be using the direct inteface</li>\\n</ul>\\n<hr />\\n<h2 id=\\\"version-12\\\">Version 12</h2>\\n<h3 id=\\\"changes-version-1210\\\">Changes Version 12.10</h3>\\n<ol>\\n<li>New&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.Children.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Children</a>&nbsp;DataSource</li>\\n<li>New&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.Parents.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Parents</a>&nbsp;DataSource</li>\\n<li>New&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.Metadata.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Metadata</a>&nbsp;DataSource</li>\\n<li>New&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.MetadataTargets.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Metadata<wbr />Targets</a>&nbsp;DataSource</li>\\n<li>The&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.StreamMerge.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Stream<wbr />Merge</a>&nbsp;DataSource got three new out-streams&nbsp;<code>Distinct</code>,&nbsp;<code>And</code>&nbsp;and&nbsp;<code>Xor</code></li>\\n<li>Moved&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IPageService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IPage<wbr />Service</a>&nbsp;from previously&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Web.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Sxc.<wbr />Web</a>&nbsp;to&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Sxc.<wbr />Services</a>&nbsp;but preserving compatibility with old code</li>\\n<li>Moved&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IRenderService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IPage<wbr />Service</a>&nbsp;from previously&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Blocks.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Sxc.<wbr />Web</a>&nbsp;to&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Sxc.<wbr />Services</a>&nbsp;but preserving compatibility with old code</li>\\n</ol>\\n<h3 id=\\\"breaking-change-version-1210\\\">Breaking Change Version 12.10</h3>\\n<ol>\\n<li>Jquery is completely removed. This shouldn't affect your code, since all old code usually runs in DNN where jQuery is included by default.</li>\\n</ol>\\n<h3 id=\\\"changes-version-1206-lts\\\">Changes Version 12.06 LTS</h3>\\n<p>No relevant changes</p>\\n<h3 id=\\\"changes-version-1205\\\">Changes Version 12.05</h3>\\n<ol>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IJsonService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IJson<wbr />Service</a>&nbsp;for json serialize/deserialize</li>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IConvertService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IConvert<wbr />Service</a>&nbsp;for simple data-type conversion, also available on the&nbsp;<code>Convert</code>&nbsp;property of Razor12 and Api12</li>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.ILogService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">ILog<wbr />Service</a>&nbsp;to log messages to the system (Dnn/Oqtane)</li>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IMailService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IMail<wbr />Service</a>&nbsp;to easily send mails cross-platform</li>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.ISecureDataService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">ISecure<wbr />Data<wbr />Service</a>&nbsp;to use encrypted settings</li>\\n<li>Introduced&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Sxc.Services.IRenderService.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IRender<wbr />Service</a>&nbsp;for inner-content rendering (Oqtane code must use this)</li>\\n<li>Published&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataFormats.EavLight.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Eav.<wbr />Data<wbr />Formats.<wbr />Eav<wbr />Light</a>&nbsp;to better document simple eav data</li>\\n<li>Published&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataFormats.EavLight.IConvertToEavLight.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">IConvert<wbr />To<wbr />Eav<wbr />Light</a>&nbsp;as the new standard way to prepare entities for WebAPI serialization.<br />This is meant to replace previous code using objects such as&nbsp;<code>EntitiesToDictionary</code>&nbsp;or&nbsp;<code>DataToDictionary</code>&nbsp;which are now marked as obsolete.</li>\\n<li>New Razor12, Api12 and Code12 Classes now don't support old, obsolete APIs anymore</li>\\n<li>Link.Image now also accepts&nbsp;<code>parameters</code>&nbsp;as a parameter</li>\\n<li>Link.Image and Link.To always create safe urls now (spaces are encoded etc.)</li>\\n<li>Link.To and Link.Image now have a parameter&nbsp;<code>type</code>&nbsp;which can be&nbsp;<code>\\\"full\\\"</code>&nbsp;to ensure domains are always added to links (for use in APIs generating RSS etc.)</li>\\n<li>Update to RazorBlade v3.7</li>\\n<li>Edit.Toolbar now supports&nbsp;<code>condition</code>&nbsp;so that toolbars may or may not be created based on a true/false value</li>\\n<li>Link.Image now also accepts a&nbsp;<code>factor</code>&nbsp;or&nbsp;<code>aspectRatio</code>&nbsp;which is a string like&nbsp;<code>1:2</code>&nbsp;or&nbsp;<code>3/4</code></li>\\n<li><code>AsDynamic(...)</code>&nbsp;now also wraps anonymous objects in quite an amazing way</li>\\n<li>Bugfix: lots of small ones</li>\\n</ol>\\n<h3 id=\\\"breaking-change-version-1205\\\">Breaking Change Version 12.05</h3>\\n<p>V12 adds new properties to Razor and WebAPI which could result in some surprises:&nbsp;<code>Path</code>,&nbsp;<code>Convert</code>,&nbsp;<code>Settings</code>,&nbsp;<code>Resources</code>&nbsp;and&nbsp;<code>DevTools</code>. Especially the new&nbsp;<code>Path</code>&nbsp;and&nbsp;<code>Convert</code>&nbsp;could clash with existing code which had&nbsp;<code>@using System</code>&nbsp;or&nbsp;<code>@using System.IO</code>&nbsp;so the code would just read&nbsp;<code>Path.GetFileName(...)</code>&nbsp;or something. Because of this, we only give the latest classes&nbsp;<code>Custom.Dnn.Razor12</code>,&nbsp;<code>Custom.Dnn.Code12</code>,&nbsp;<code>Custom.Hybrid.Razor12</code>,&nbsp;<code>Custom.Hybrid.Api12</code>&nbsp;etc. these properties.</p>\\n<p>This means that previous base classes do not have these by design, and we encourage you to move to these latest base classes.</p>\\n<blockquote>\\n<p>Important: 2sxc 12.00 - 12.04 also had some of these properties on&nbsp;<code>ToSic.Sxc.Dnn.RazorComponent</code>&nbsp;as well as&nbsp;<code>ToSic.Sxc.Dnn.ApiController</code>. So if you were eager to use these properties but didn't change the base class, you were able to use it. To protect thousands of upgrade-scenarios we had to take them away from the old base classes. Sorry!</p>\\n</blockquote>\\n<p><strong>Possible Breaking Changes</strong></p>\\n<ol>\\n<li>We believe nothing broke, but it could be that some commands on&nbsp;<code>EntitiesToDictionary</code>&nbsp;or&nbsp;<code>DataToDictionary</code>&nbsp;were accidentally changed. Pls report so we can fix that.</li>\\n<li>The&nbsp;<code>Link.To(...)</code>&nbsp;now returns safe URLs. This should not be an issue, but in rare cases post-processing of the string returned may expect spaces or something, which are now&nbsp;<code>%20</code></li>\\n<li>We disabled old obsolete APIs on the new Razor12, Api12 and Code12 base classes. In case you were using this (not likely) you'll get an error telling you about this.</li>\\n</ol>\\n<h3 id=\\\"changes-version-1204-incl-1203-which-was-not-officially-released\\\">Changes Version 12.04 incl 12.03 which was not officially released</h3>\\n<ol>\\n<li>Settings Stack and Resources Stack added, and the&nbsp;<code>Settings</code>&nbsp;/&nbsp;<code>Resources</code>&nbsp;object now have this</li>\\n<li>Global&nbsp;<code>Settings.Images.xxx</code>&nbsp;settings defined for Content, Screen, Lightbox and Section</li>\\n<li>Global&nbsp;<code>Settings.Resources.xxx</code>&nbsp;defined for fancybox3, fancybox4, bootstrap4, bootstrap5</li>\\n<li>Link.Image API created to support predefined sizes/resize modes etc.</li>\\n<li>Created feature where DynamicEntities can browse to sub-items using their identifier (used for&nbsp;<code>Settings.Images.Content</code>&nbsp;where&nbsp;<code>Content</code>&nbsp;is actually the title of a sub-entity)</li>\\n<li>Added debug-feature for DynamicEntity get</li>\\n<li>String-Dropdown inputs now have a value-key presets option (instead of the key-value which was flaky) and added support for escaping special characters</li>\\n<li>#Oqtane 2.2 support added</li>\\n<li>Introduced Monaco (VS-Code online) editor for beta-testing source-editing</li>\\n</ol>\\n<h3 id=\\\"breaking-change-version-1204\\\">Breaking Change Version 12.04</h3>\\n<ol>\\n<li>DynamicEntity now has a property Count because it's a list as well, this could cause issues if a content-type has a property&nbsp;<code>Count</code></li>\\n<li>DynamicEntity is now always a list. Because of this we removed the&nbsp;<code>DynamicEntityWithList</code>&nbsp;object. We believe the type is never referenced in user code, but if it is, this would be a breaking change.</li>\\n<li>Many parts that prepare Entities returned a&nbsp;<code>Dictionary&lt;string, object&gt;</code>&nbsp;and now return an&nbsp;<code>IDictionary&lt;string, object&gt;</code>.<br />We believe this shouldn't hurt much, since the result would usually be in a&nbsp;<code>var</code>&nbsp;or returend directly to the API for streaming, but in case someone had used explicitly typed code, this will require a minor change</li>\\n</ol>\\n<h3 id=\\\"changes-version-1202\\\">Changes Version 12.02</h3>\\n<ol>\\n<li>Formulas feature finalized</li>\\n<li>DynamicEntityStack object created</li>\\n<li>Hybrid&nbsp;<code>IPageService</code>&nbsp;created with&nbsp;<code>Activate</code>&nbsp;and similar features</li>\\n<li><code>CmsContext</code>&nbsp;was enhanced with&nbsp;<code>View</code>&nbsp;information</li>\\n<li>Content-Type icons can now be stored in the app with an&nbsp;<code>[App:Path]/image.jpg</code>&nbsp;style reference</li>\\n<li>Enabled view-configuration to configure search behavior incl. not-to-index or what streams should be indexed</li>\\n<li><code>turnOn</code>&nbsp;created / deployed</li>\\n<li>#Oqtane 2.1 support added in 2sxc 12.02.01</li>\\n</ol>\\n<h3 id=\\\"changes-version-1200-todo\\\">Changes Version 12.00 Todo</h3>\\n<hr />\\n<h2 id=\\\"version-11\\\">Version 11</h2>\\n<h3 id=\\\"changes-version-1100\\\">Changes Version 11.00</h3>\\n<h4 id=\\\"breaking-changes\\\">Breaking Changes</h4>\\n<p>The following changes are all super-low-profile, but we want to document them just to be through:</p>\\n<ol>\\n<li><code>DataStream</code>&nbsp;and&nbsp;<code>IDataStream</code>&nbsp;loses a very old property called&nbsp;<code>.LightList</code>&nbsp;- we're pretty sure it's not in use anywhere, if you have it, just use&nbsp;<code>.List</code>&nbsp;instead.</li>\\n</ol>\\n<h4 id=\\\"enhancements\\\">Enhancements</h4>\\n<ol>\\n<li>Brand new Admin UI based on Angular 9 and Ivy with new Code-Editor, new&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;and much more</li>\\n<li>Razor CodeBehind</li>\\n<li>Automatic Polymorphism</li>\\n<li>Updated Razor Blades to 3.02 with the new&nbsp;<code>Tags.SafeUrl(...)</code>&nbsp;command</li>\\n<li>Field: Boolean-Tristate which saves true/false/null</li>\\n<li><code>App.Data.Create(...)</code>&nbsp;now returns entities it just created</li>\\n</ol>\\n<h3 id=\\\"changes-version-1101\\\">Changes Version 11.01</h3>\\n<h4 id=\\\"enhancements-1\\\">Enhancements</h4>\\n<ol>\\n<li>In-Page Toolbar now recognises sub-item lists and provides sorting and editing buttons #2009</li>\\n<li>Item-lists now have a button to add existing items to them #1278</li>\\n<li>New system to create extensions in an app, in the system folder</li>\\n<li>Ability to create custom Input Fields just by placing them in the system folder #2070</li>\\n</ol>\\n<h4 id=\\\"minor\\\">Minor</h4>\\n<ol>\\n<li>Improve Equality Check for DynamicEntities and EntitiesInList #2075</li>\\n<li>Data-table in admin UI now shows&nbsp;<code>Title</code>&nbsp;field no matter if there is another field which is the title #1639</li>\\n<li>Button to flush app-cache in admin-ui #2073</li>\\n<li>2sxc Insights now available from the super-user toolbar #2069</li>\\n<li>PT translations are added again #2064</li>\\n<li>Loads of enhancements and minor issues in the UI</li>\\n</ol>\\n<h3 id=\\\"changes-version-1102\\\">Changes Version 11.02</h3>\\n<h4 id=\\\"enhancements-2\\\">Enhancements</h4>\\n<ol>\\n<li>App-Extensions system in the folder&nbsp;<code>system</code></li>\\n<li>Custom WebComponent based input fields #2082</li>\\n<li>API to reconfigure the wysiwyg input control #2090</li>\\n<li>Show view use with links to pages and more #2077</li>\\n<li>UI - fields can now be set to not-translate #2086</li>\\n<li>UI - boolean can now show different labels based on the value it has #2085</li>\\n</ol>\\n<h4 id=\\\"minor-1\\\">Minor</h4>\\n<ol>\\n<li>Add HR language pack for editor #2087</li>\\n<li>show app-name in admin ui</li>\\n<li>show app-icon in apps-management #2078</li>\\n</ol>\\n<h3 id=\\\"changes-version-1103---todo\\\">Changes Version 11.03 - todo</h3>\\n<h3 id=\\\"changes-version-1104---todo\\\">Changes Version 11.04 - todo</h3>\\n<h3 id=\\\"changes-version-1105\\\">Changes Version 11.05</h3>\\n<ol>\\n<li>Old Edit UI be removed</li>\\n<li>Old Admin-UI be removed</li>\\n<li>APIs which only the old UIs used be removed</li>\\n<li>Old helper JS for AngularJS apps (located in&nbsp;<code>/js/angularjs</code>) will be removed from the distribution. They had not been updated for over 3 years and we believe they were not widely used. Anybody upgrading will still preserve the files that are there. If you really need them, download an old release of 2sxc and get them manually.</li>\\n</ol>\\n<h3 id=\\\"changes-version-1106---1111---todo\\\">Changes Version 11.06 - 11.11 - todo</h3>\\n<p>\\uD83D\\uDC49 See the&nbsp;<a href=\\\"https://github.com/2sic/2sxc/projects/23\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Project Issues</a></p>\\n<h3 id=\\\"changes-version-1113\\\">Changes Version 11.13</h3>\\n<ol>\\n<li><a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;3 with a lot of new features\\n<ol>\\n<li>Click on a stream&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/debug/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">shows what's in that stream</a></li>\\n<li>Much&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/debug/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">better error handling</a>&nbsp;to avoid queries from crashing if a stream has an error</li>\\n<li>All internal DataSources were updated to use this new Error-Handling</li>\\n<li>Output of Query is now tabbed which is much nicer to use</li>\\n<li>Visual-Query only returns top 25 results by default to help with creating queries with large amounts of data</li>\\n<li>UI was enhanced to show more user-friendly names/infos</li>\\n<li><code>DynamicIn</code>&nbsp;was introduced so DataSources can indicate that they expect a lot of In-streams</li>\\n<li>UI enhanced with better/larger buttons/icons</li>\\n<li><code>In</code>&nbsp;Streams are now managed better so they can connect before it's known if the source&nbsp;<code>Out</code>&nbsp;actually has that stream</li>\\n</ol>\\n</li>\\n<li>New DataSource Error to provoke an error in a Query for testing</li>\\n<li>New DataSource&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.SerializationConfiguration.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Serialization<wbr />Configuration</a>&nbsp;lets you determine how things are serialized</li>\\n<li>DataSource&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.AttributeFilter.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Attribute<wbr />Filter</a>&nbsp;enhanced to have keep-all or remove-all and multi-line configuration (easier)</li>\\n<li>New&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/net-code/data-sources/custom/tutorial-basic/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Data<wbr />Source Tutorial with updated sample code</a></li>\\n<li>Insights-Logging was enhanced to log Exceptions (used in the&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;Error handling)</li>\\n</ol>\\n<p><strong>Bugfixes</strong></p>\\n<ol>\\n<li>Toolbar had issue when color code was numbers only</li>\\n</ol>\\n<h3 id=\\\"changes-version-1114---1122-lts-todo\\\">Changes Version 11.14 - 11.22 LTS TODO</h3>\\n<h2 id=\\\"breaking-changes-in-eav-and-2sxc-v11\\\">Breaking Changes in EAV and 2sxc v11</h2>\\n<p>We try to minimize breaking changes, and most breaking changes won't affect your work, because it's internal API. We're documenting it here to ensure you know what happened, in case you still run into this.</p>\\n<h3 id=\\\"summary\\\">Summary</h3>\\n<p>There were small breaking changes in 11.00 to 11.11 but they were internal so shouldn't affect normal developers.</p>\\n<h3 id=\\\"breaking-changes-version-1107---drop-the-old-edit-ui\\\">Breaking Changes Version 11.07 - Drop the old edit UI</h3>\\n<ol>\\n<li>In 11.07 the old edit UI was removed, so customizations for that UI would not be in effect any more.</li>\\n</ol>\\n<h3 id=\\\"breaking-changes-version-1110---mainly-dependency-injection\\\">Breaking Changes Version 11.10 - Mainly Dependency Injection</h3>\\n<ol>\\n<li>In v11.10 we used much more dependency injection than ever before and stopped using static values which were still in the API in many places. Because of this, certain helper objects to create entities or lookup values were changed and their constructors were changed. We invested a lot of time to try to ensure that old APIs still work, but in case you're hit by one of these, make sure you check the DI and switch to resolving the objects using DI.</li>\\n</ol>\\n<h3 id=\\\"breaking-changes-version-1111---language-detection\\\">Breaking Changes Version 11.11 - Language Detection</h3>\\n<ol>\\n<li>Previously the language detection used the Thread culture. Turns out this wasn't reliable because Dnn does some funny stuff (probably historical) which means that API-calls ended up using the language stored in some cookie instead of the one specified by the URL. We changed this, which should be more reliable. But if you were relying on this strange effect, then it may be a breaking change.</li>\\n<li>Internally our tokens were also using the thread culture. When we changed this, we also had to change how tokens pick up the language. In rare cases this may affect you.</li>\\n<li>We changed all tokens to always resolve boolean values to&nbsp;<code>true</code>/<code>false</code>&nbsp;(previously they would have been changed to the current language, like&nbsp;<code>wahr</code>&nbsp;for german). We believe this change is only an improvement, and should ensure that internal resolves in Queries etc. result in reliable output.</li>\\n</ol>\\n<h3 id=\\\"breaking-changes-version-1111---datasources-datasourceconfiguration\\\">Breaking Changes Version 11.11 - DataSources: DataSourceConfiguration</h3>\\n<p>Note that we also improved the&nbsp;<code>DataSourceConfiguration</code>&nbsp;to an interface&nbsp;<code>IDataSourceConfiguration</code>&nbsp;and documented this. As a side effect the API stays the same, but you will have to recompile your data sources for them to work again - sorry.</p>\\n<h3 id=\\\"breaking-changes-version-111103---ientity-values\\\">Breaking Changes Version 11.11.03 - IEntity Values</h3>\\n<ol>\\n<li><code>IEntity</code>&nbsp;had a command called&nbsp;<code>Value(fieldName)</code>&nbsp;which was probably never used. The idea used to be that it does language lookup internally, but we refactored this out since it could never be fully reliable because the full language list wasn't known to the&nbsp;<code>IEntity</code>. So we re-purposed the method (assuming it's not used) to just lookup the first occurance of the value. This way it`s useful for configurations and similar which are not multi-language.</li>\\n<li><code>IEntity</code>&nbsp;also had a&nbsp;<code>Value(fieldname, lookup)</code>&nbsp;method. We are deprecating it, and making the lookup not happen from now on. We believe it was never used.</li>\\n<li><code>IEntity</code>&nbsp;had a command called&nbsp;<code>PrimaryValue(fieldName)</code>&nbsp;which was probably never ever used, so we're deprecating it. Use&nbsp;<code>Value(fieldName)</code>&nbsp;instead.</li>\\n</ol>\\n<h3 id=\\\"breaking-changes-version-111103---other\\\">Breaking Changes Version 11.11.03 - Other</h3>\\n<ol>\\n<li>UI Toolbar dropped the button and command for&nbsp;<code>item-history</code>, as the history is now part of the edit dialog</li>\\n</ol>\\n<hr />\\n<h2 id=\\\"version-10\\\">Version 10</h2>\\n<h3 id=\\\"changes-version-1001---1009-lts\\\">Changes Version 10.01 - 10.09 LTS</h3>\\n<ul>\\n<li>Develop and fine-tuning of the new Edit-UI based on Angular 8</li>\\n</ul>\\n<h3 id=\\\"changes-version-1020-00-to-1020-05\\\">Changes Version 10.20-00 to 10.20-05</h3>\\n<ul>\\n<li>Enhanced ListCache so it will prevent parallel buildup - important for long-loading DataSources like SharePoint DataSources</li>\\n<li>Updating to RazorBlade 3.1 which doesn't need extension methods</li>\\n</ul>\\n<h3 id=\\\"changes-version-1020-06\\\">Changes Version 10.20-06</h3>\\n<ul>\\n<li>Created&nbsp;<code>AsDynamic(string)</code></li>\\n<li>Created&nbsp;<code>AsDynamic(DataSource)</code>&nbsp;to enable&nbsp;<code>AsDynamic(Data)</code>&nbsp;instead of&nbsp;<code>AsDynamic(Data[\\\"Default\\\"])</code></li>\\n</ul>\\n<h3 id=\\\"changes-version-1021\\\">Changes Version 10.21</h3>\\n<ul>\\n<li>New&nbsp;<code>AsList()</code>&nbsp;for better code</li>\\n<li>New&nbsp;<code>AsDynamic(string)</code>&nbsp;to work with json</li>\\n<li><code>/dist/</code>&nbsp;is now cleaned up on every update, to better distribute changing JS file structures</li>\\n</ul>\\n<h3 id=\\\"changes-version-1022\\\">Changes Version 10.22</h3>\\n<ul>\\n<li>Query Params added for VisualQuery</li>\\n<li>Created QueryRun DataSource</li>\\n<li>Insights now includes the code file and line numbers</li>\\n<li>Insights now also measures time needed to execute some code</li>\\n<li>Various performance enhancements</li>\\n<li>Improved SoC for AppsCache and AppRoot DataSource</li>\\n</ul>\\n<h3 id=\\\"changes-version-1023\\\">Changes Version 10.23</h3>\\n<ul>\\n<li>Lots of logging enhancements</li>\\n</ul>\\n<h3 id=\\\"changes-version-1024-lts\\\">Changes Version 10.24 LTS</h3>\\n<ul>\\n<li>New stable LTS</li>\\n<li>Improved/fixed QueryRun DataSource</li>\\n<li>Improved Insights</li>\\n<li>Enhancements to use 2sxc with Redis Cache</li>\\n<li>WYSIWYG enhancements for better H1-Hx, P and Blockquote</li>\\n<li>Performance enhancements</li>\\n<li>Intenal refactoring for APIs</li>\\n<li>Introduced an internal Compatibility-Level to disable very old features when using new RazorComponents</li>\\n</ul>\\n<h3 id=\\\"changes-version-1025-lts\\\">Changes Version 10.25 LTS</h3>\\n<ul>\\n<li>Changed how the $2sxc client JavaScripts are loaded for much better performance and better Google PageSpeed</li>\\n<li>Enabled various features for the Content area which previously were hidden, like Resources and Settings</li>\\n<li>Released brand new Content-Templates App with best-practices for 10.25</li>\\n<li>Fixed bugs with Evoq Page Publishing</li>\\n<li>Enhanced the ValueFilter DataSource to handle dates which were null</li>\\n</ul>\\n<h3 id=\\\"changes-version-1026\\\">Changes Version 10.26</h3>\\n<ul>\\n<li>TinyMCE Updated to 5.1</li>\\n<li>Enhanced&nbsp;<code>CreateInstance</code>&nbsp;API to also work when compiling Razor files from a WebApi</li>\\n<li>New DataSource&nbsp;<code>StreamPick</code></li>\\n<li>New automatic Param called&nbsp;<code>[Params:ShowDrafts]</code>&nbsp;to be used in&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;- returns&nbsp;<code>True</code>&nbsp;or&nbsp;<code>False</code></li>\\n<li>New tokens&nbsp;<code>[App:AppId]</code>&nbsp;and&nbsp;<code>[App:ZoneId]</code>&nbsp;to use in&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;calles (dropdown from query)</li>\\n<li>Changed List-Caching bbehavior to create more reliable cache-keys for complex queries (previously it only went through&nbsp;<code>Default</code>&nbsp;streams to generate the cache-key)</li>\\n</ul>\\n<h3 id=\\\"changes-version-1027\\\">Changes Version 10.27</h3>\\n<h4 id=\\\"possibly-breaking-changes\\\">Possibly breaking changes</h4>\\n<ol>\\n<li>Because the dynamic entity list now has a type which is dynamic, it cannot be cast to&nbsp;<code>List&lt;dynamic&gt;</code>&nbsp;any more.&nbsp;<code>IList&lt;dynamic&gt;</code>&nbsp;works, but in case you have any code casting it to&nbsp;<code>List&lt;dynamic&gt;</code>&nbsp;you'll need to change that to either&nbsp;<code>IList&lt;dynamic&gt;</code>&nbsp;or&nbsp;<code>IEnumerable&lt;dynamic&gt;</code>.</li>\\n</ol>\\n<h4 id=\\\"new-features--major-improvements\\\">New Features / Major Improvements</h4>\\n<ul>\\n<li>Changed DynamicEntity so that accessing a property which contains many other entities it will return a&nbsp;<code>DynamicEntityWithList</code>. This allows Razor files to access the properties like&nbsp;<code>.EntityId</code>&nbsp;or&nbsp;<code>.FirstName</code>&nbsp;of the main entity in a sub-list easily without requiring&nbsp;<code>AsList(...)</code>&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1993\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1993</a></li>\\n<li>Updated Quick-Dialog to use Angular 9, Ivy and the latest Dnn-Sxc-Angular&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1992\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1992</a></li>\\n<li>New DataSource&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.AttributeRename.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Attribute<wbr />Rename</a>&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/2004\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#2004</a></li>\\n<li>Completely refactored internal list management API&nbsp;<a href=\\\"https://docs.2sxc.org/abyss/releases/history/(https://github.com/2sic/2sxc/issues/1995)\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1995</a></li>\\n<li>Complete refactoring of the inpage code to make it typesafe (no more&nbsp;<code>any</code>&nbsp;types)</li>\\n<li>Created brand-new,&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/js-code/toolbars/simple.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">simpler way to create custom Toolbars</a>&nbsp;and&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/edit/edit-ux/toolbars/customize.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">specs</a></li>\\n<li>Introduces&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/net-code/debug/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">JS/API 2sxc-Insights</a>&nbsp;for debugging In-Page code</li>\\n</ul>\\n<h4 id=\\\"enhancements\\\">Enhancements</h4>\\n<ul>\\n<li>Performance-Enhance App DataSource to delay building objects until needed&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1991\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1991</a></li>\\n<li>Performance-Enhance internal Token Lookup&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1998\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1998</a></li>\\n<li>Enhanced Dnn Search Index logging&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1997\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1997</a></li>\\n<li>Corrected help-links on all data sources&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1994\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1994</a></li>\\n</ul>\\n<h4 id=\\\"bugfixes\\\">Bugfixes</h4>\\n<ul>\\n<li>Cache-All-Streams only used the Default-Streams for Cache-Key identification&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1988\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1988</a></li>\\n<li>QueryRun DataSource doesn't show statitics on all streams&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1989\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1989</a></li>\\n<li>Modified date and Owner information were missing on json stored entities&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/2005\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#2005</a>&nbsp;/&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/2006\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#2006</a></li>\\n<li>Fixed bug in JS API for non-2sxc endpoint resolution&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/2000\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#2000</a></li>\\n<li>Queries didn't resolve Dnn tokens when accessed in the Search Index&nbsp;<a href=\\\"https://github.com/2sic/2sxc/issues/1999\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">#1999</a></li>\\n</ul>\\n<h2 id=\\\"breaking-changes-in-eav-and-2sxc\\\">Breaking Changes in EAV and 2sxc</h2>\\n<p>We try to minimize breaking changes, and most breaking changes won't affect your work, because it's internal API. We're documenting it here to ensure you know what happened, in case you still run into this.</p>\\n<h3 id=\\\"summary\\\">Summary</h3>\\n<blockquote>\\n<p>Version 10 has a lot of small breaking changes because we restructured the internal API so it's consistent when we publish it. All these things shouldn't affect you, because they were internal APIs, but in case it does - here's what we did.</p>\\n</blockquote>\\n<h3 id=\\\"version-1022-and-1023\\\">Version 10.22 and 10.23</h3>\\n<ol>\\n<li>Renamed the&nbsp;<code>RootDataSource</code>&nbsp;and the Interface to&nbsp;<code>IAppRoot</code></li>\\n<li>Split SOC of the&nbsp;<code>AppRoot</code>&nbsp;DataSource so that caching, Root-Metadata and ListCache is fully separate</li>\\n<li>Since the Logging system now auto-picks up the code lines and names of the methods, we simplified the commands and dropped some parameters.</li>\\n<li>Moved quite a bit of the DataSource objects into sub-objects, again for SOC.</li>\\n</ol>\\n<h3 id=\\\"version-1020-04-ca-2019-12-03\\\">Version 10.20-04 (ca. 2019-12-03)</h3>\\n<ol>\\n<li>Renamed&nbsp;<code>DataTableDataSource</code>&nbsp;to&nbsp;<code>DataTable</code>, old name still works.</li>\\n<li>Renamed&nbsp;<code>ExternalDataDataSource</code>&nbsp;to&nbsp;<code>ExternalData</code>, old name still works.</li>\\n<li>Renamed&nbsp;<code>ToSic.SexyContent.DataSources.ModuleDataSource</code>&nbsp;to&nbsp;<code>ToSic.Sxc.DataSources.CmsBlock</code>, old name still works.</li>\\n<li>Renamed&nbsp;<code>ToSic.Eav.DataSources.VisualQuery.VisualQueryAttribute</code>&nbsp;to&nbsp;<code>ToSic.Eav.DataSources.Queries.VisualQueryAttribute</code>, old name still works.</li>\\n<li>Renamed&nbsp;<code>ToSic.SexyContent.Environment.Dnn7.Factory</code>&nbsp;to&nbsp;<code>ToSic.Sxc.Dnn.Factory</code>, old name still works.</li>\\n<li>Renamed&nbsp;<code>ToSic.Eav.DataSources.BaseDataSource</code>&nbsp;to&nbsp;<code>ToSic.Eav.DataSources.DataSourceBase</code>&nbsp;for consistency, old name still works.</li>\\n<li>Moved the LookUp namespaces into the Core DLL</li>\\n</ol>\\n<h3 id=\\\"version-1020-02-ca-2019-11-22\\\">Version 10.20-02 (ca. 2019-11-22)</h3>\\n<p>More internal changes which shouldn't affect anybody, but make the API ready for public docs...</p>\\n<ol>\\n<li>Moved/renamed the internal&nbsp;<code>Eav.AppDataPackage</code>&nbsp;to&nbsp;<code>Eav.Apps.AppState</code></li>\\n<li>Moved/renamed some internal interfaces like&nbsp;<code>Entity...</code></li>\\n<li>Did a major change for how&nbsp;<code>Attribute&lt;T&gt;</code>&nbsp;for relationships work.<br />Before they were&nbsp;<code>Attribute&lt;EntityRelationship&gt;</code>&nbsp;and now they are&nbsp;<code>Attribute&lt;IEnumerable&lt;IEntity&gt;&gt;</code>.<br />This also affects&nbsp;<code>Value&lt;EntityRelationship&gt;</code>&nbsp;which is now&nbsp;<code>Value&lt;IEnumerable&lt;IEntity&gt;&gt;</code></li>\\n<li>Moved&nbsp;<code>Tenant&lt;T&gt;</code>&nbsp;and&nbsp;<code>Container&lt;T&gt;</code>&nbsp;including matching interfaces to&nbsp;<code>Eav.Environment</code></li>\\n<li>Renamed&nbsp;<code>IAppIdentity</code>&nbsp;to&nbsp;<code>IInAppAndZone</code>&nbsp;and&nbsp;<code>IZoneIdentity</code>&nbsp;to&nbsp;<code>IInZone</code></li>\\n<li>Renamed&nbsp;<code>ICacheKeyProvider</code>&nbsp;to&nbsp;<code>ICacheKey</code></li>\\n<li>Renamed&nbsp;<code>CacheChainedIEnumerable&lt;T&gt;</code>&nbsp;to&nbsp;<code>SynchronizedList&lt;T&gt;</code></li>\\n<li>Moved/Renamed&nbsp;<code>MetadataFor</code>&nbsp;to&nbsp;<code>Eav.Metadata.Target</code>. Left old name compatible.</li>\\n<li>Moved some extension methods for IEntity from&nbsp;<code>ToSic.Eav.Data.Query</code>&nbsp;to&nbsp;<code>ToSic.Eav.Data</code></li>\\n<li>Changed&nbsp;<code>Permissions</code>&nbsp;to be strongly typed EntityBased objects</li>\\n</ol>\\n<h3 id=\\\"version-102001-2019-11-12\\\">Version 10.20.01 (2019-11-12)</h3>\\n<ol>\\n<li>Internal code now uses the term&nbsp;<code>Header</code>&nbsp;instead of&nbsp;<code>ListContent</code>. External code provides both for backward-compatibility</li>\\n<li>moved internal interfaces for engines (Razor/Token) to final namespaces&nbsp;<code>ToSic.Sxc.Engines</code>\\n<ol>\\n<li><code>IEngine</code></li>\\n<li><code>EngineBase</code></li>\\n<li><code>ITokenEngine</code></li>\\n<li><code>IRazorEngine</code></li>\\n</ol>\\n</li>\\n<li>corrected architecture - some template-management code had slipped into&nbsp;<code>Eav.Apps</code>, was moved back to&nbsp;<code>Sxc.Apps</code></li>\\n<li>The&nbsp;<code>Template</code>&nbsp;object was moved from&nbsp;<code>Eav.Apps</code>&nbsp;to&nbsp;<code>Sxc.Views</code>&nbsp;and we added an interface&nbsp;<code>IView</code>. We also renamed the internal properti&nbsp;<code>ViewNameInUrl</code>&nbsp;to&nbsp;<code>UrlIdentifier</code>.</li>\\n<li>To correct the API a CmsManager was created extending the AppManager, which is in charge of Views</li>\\n<li>Moving internal stuff related to content blocks\\n<ol>\\n<li><code>IContentBlock</code>&nbsp;from&nbsp;<code>SexyContent.Interfaces</code>&nbsp;to&nbsp;<code>Sxc.Blocks</code></li>\\n<li>from&nbsp;<code>ToSic.SexyContent.ISxcInstance</code>&nbsp;to&nbsp;<code>ToSic.Sxc.Blocks.IBlockContext</code></li>\\n<li>actually moved a lot of things there incl.&nbsp;<code>ContentBlock</code>&nbsp;now&nbsp;<code>BlockConfiguration</code>&nbsp;and more - all internal stuff</li>\\n</ol>\\n</li>\\n<li>Moving the&nbsp;<code>ToSic.SexyContent.App</code>&nbsp;to&nbsp;<code>ToSic.Sxc.Apps.App</code></li>\\n<li>In a razor page, we added the preferred&nbsp;<code>Purpose</code>. The old&nbsp;<code>InstancePurpose</code>&nbsp;will still work</li>\\n<li>Placed some things we just moved in 10.20 to a final place - since it's a very recent change, we updated the docs in the 10.20.00 section</li>\\n</ol>\\n<h4 id=\\\"changed-but-completely-internal\\\">Changed, but completely internal</h4>\\n<ol>\\n<li>Some namespaces on&nbsp;<code>SexyContent.ContentBlocks</code>&nbsp;were moved to&nbsp;<code>Sxc.Blocks</code></li>\\n</ol>\\n<h3 id=\\\"version-102000-2019-11-05\\\">Version 10.20.00 (2019-11-05)</h3>\\n<ol>\\n<li>the internal interface&nbsp;<code>IInPageEditingHelpers</code>&nbsp;was moved from&nbsp;<code>ToSic.SexyContent.Interfaces</code>&nbsp;to the namespace&nbsp;<code>ToSic.Sxc.Web</code></li>\\n<li>the internal interface&nbsp;<code>ILinkHelper</code>&nbsp;was moved to&nbsp;<code>ToSic.Sxc.Web</code></li>\\n<li>the internal interface&nbsp;<code>IHtmlHelper</code>&nbsp;was moved to&nbsp;<code>ToSic.Sxc.Dnn</code></li>\\n<li>the property&nbsp;<code>Configuration</code>&nbsp;on dynamic entities was deprecated in 2sxc 4 and removed in 2sxc 10 - we don't think it was ever used</li>\\n<li>moved internal Metadata interfaces (ca. 5) into final namespace&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.Metadata.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">To<wbr />Sic.<wbr />Eav.<wbr />Metadata</a></li>\\n<li>Moved a bunch of internal interfaces which we believe were never used externally from&nbsp;<code>ToSic.Eav.Interfaces</code>&nbsp;to&nbsp;<code>ToSic.Eav.Data</code>\\n<ol>\\n<li><code>ToSic.Eav.Data.IAttribute</code></li>\\n<li><code>ToSic.Eav.IAttribute&lt;T&gt;</code></li>\\n<li><code>IAttributeBase</code></li>\\n<li><code>IAttributeDefinition</code></li>\\n<li><code>IChildEntities</code></li>\\n<li><code>IContentType</code></li>\\n<li><code>IDimension</code></li>\\n<li><code>IEntityLight</code></li>\\n<li><code>ILanguage</code></li>\\n<li><code>IRelationshipManager</code></li>\\n<li><code>IValue</code></li>\\n<li><code>IValue&lt;T&gt;</code></li>\\n<li><code>IValueOfDimension&lt;T&gt;</code></li>\\n</ol>\\n</li>\\n<li>Moved a bunch of internal interfaces which we believe were never used externally from&nbsp;<code>ToSic.Eav.Apps.Interfaces</code>&nbsp;to&nbsp;<code>ToSic.Eav.Apps</code>\\n<ol>\\n<li><code>IApp</code></li>\\n<li><code>IAppData</code></li>\\n<li><code>IAppDataConfiguration</code></li>\\n<li><code>IAppEnvironment</code></li>\\n<li><code>IEnvironmentFactory</code></li>\\n<li><code>IInstanceInfo</code></li>\\n<li><code>IItemListAction</code></li>\\n<li><code>IPagePublishing</code></li>\\n<li><code>ITenant</code></li>\\n<li><code>IZoneMapper</code></li>\\n</ol>\\n</li>\\n<li>the internal namespace&nbsp;<code>ToSic.Eav.ValueProvider</code>&nbsp;was changed to&nbsp;<code>ToSic.Eav.LookUp</code>&nbsp;and inside it<br />we renamed a bunch of internal interfaces and objects which we believe were never used externally</li>\\n</ol>\\n<h4 id=\\\"deprecatedchanged-but-not-broken\\\">Deprecated/Changed, but not broken</h4>\\n<ol>\\n<li>the internal interface&nbsp;<code>ToSic.SexyContent.IAppAndDataHelpers</code>&nbsp;was renamed to&nbsp;<code>ToSic.Sxc.IDynamicCode</code>&nbsp;but the old interface still exists, so it shouldn't break<br /><em>it was used by Mobius Forms</em></li>\\n<li>moved&nbsp;<code>ToSic.Eav.Interfaces.IEntity</code>&nbsp;to&nbsp;<code>ToSic.Eav.Data.IEntity</code>&nbsp;- but preserved the old interface for compatibility&nbsp;<em>it was used everywhere</em></li>\\n</ol>\\n<h4 id=\\\"clean-up-but-not-broken\\\">Clean-Up, but not broken</h4>\\n<ol>\\n<li>We're transitioning to the term&nbsp;<code>Header</code>&nbsp;instead of&nbsp;<code>ListContent</code>&nbsp;in templates.<br />The Razor pages and WebApi have this starting now, while old terms still work. Note that we're&nbsp;<em>not</em>&nbsp;creating a&nbsp;<code>HeaderPresentation</code>, because you should use&nbsp;<code>Header.Presentation</code></li>\\n</ol>\\n<hr />\\n<h2 id=\\\"version-9\\\">Version 9</h2>\\n<h3 id=\\\"changes-version-90\\\">Changes Version 9.0</h3>\\n<ul>\\n<li>[x] Change data access to Entity Framework Core 1.1</li>\\n<li>[x] Change IoC Layer to use .net Core mechanisms</li>\\n<li>[x] Replace Quick-Dialogs with Angular4 implementation</li>\\n</ul>\\n<h3 id=\\\"changes-version-91\\\">Changes Version 9.1</h3>\\n<ul>\\n<li>[x] Move primary quick-dialog GUI to bottom of page</li>\\n</ul>\\n<h3 id=\\\"changes-version-93\\\">Changes Version 9.3</h3>\\n<ul>\\n<li>[x] Item-Level versioning, history and rollback</li>\\n</ul>\\n<h3 id=\\\"changes-version-94\\\">Changes Version 9.4</h3>\\n<ul>\\n<li>[x] Drop all dependencies to Telerik - file browser using ADAM</li>\\n</ul>\\n<h3 id=\\\"changes-version-95\\\">Changes Version 9.5</h3>\\n<ul>\\n<li>[x]&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/cms/page-publishing/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Support for Dnn/Evoq Page Publishing</a></li>\\n</ul>\\n<h3 id=\\\"changes-version-96\\\">Changes Version 9.6</h3>\\n<ul>\\n<li>[x]&nbsp;<a href=\\\"https://2sxc.org/en/blog/post/releasing-2sxc-9-6-with-extensive-logging\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Extensive logging system to watch all internals</a></li>\\n</ul>\\n<h3 id=\\\"changes-version-97---the-json-content-types--entities-upgrade\\\">Changes Version 9.7 - the JSON-Content-Types &amp; Entities Upgrade</h3>\\n<ul>\\n<li>[x] New features in entity json serialization\\n<ul>\\n<li>[x] Support for schema-free (very dynamic) entities</li>\\n</ul>\\n</li>\\n<li>[x] new features in content-type json serialization\\n<ul>\\n<li>[x] defined json format for content-types</li>\\n<li>[x] full serialization and deserialization of json-based content types</li>\\n</ul>\\n</li>\\n<li>[x] SQL IRepository storage enhancements\\n<ul>\\n<li>[x] extended SQL table Entities to also store AppId and ContentType (name) to ensure that json-entities can be stored</li>\\n<li>[x] Support to persist entities as JSON in repository (DB)</li>\\n</ul>\\n</li>\\n<li>[x] file-storage implementation of IRepository loader, to created a standard-based app-content-types provider\\n<ul>\\n<li>[x] Ability to provide file-based json content-types at a system level, which is probably the better solution for most scenarios (more flexible, easier to spot changes, etc.)</li>\\n</ul>\\n</li>\\n<li>[x] global content-types system\\n<ul>\\n<li>[x] Support for code-provided content-types, which allows faster feature-evolution</li>\\n<li>[x]&nbsp;<del>Support for JSON based i18n on code-provided content-types, to allow better translation</del>&nbsp;removed again, as not needed</li>\\n</ul>\\n</li>\\n<li>[x] Ensure export/import of data of these new content-types (req. extensive refactoring)</li>\\n<li>[x] extensive automated testing of these new features</li>\\n</ul>\\n<h3 id=\\\"changes-version-98---the-visualquery-upgrade\\\">Changes Version 9.8 - the VisualQuery Upgrade</h3>\\n<ul>\\n<li>[x] SqlDataSource in&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;Designer</li>\\n<li>[x] Show DataSources which have Fallback-In-Streams in&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;Designer</li>\\n<li>[x] UI Updates on&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;Designer, to better fit current needs</li>\\n<li>[x] More help documentation for various data sources in&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/query/visual-query/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Visual<wbr />Query</a>&nbsp;Designer</li>\\n<li>[x] Shuffle DataSource now configurable in VisualQuery</li>\\n<li>[x] Support for Schema-Free Content (dynamic, without existing content-type)</li>\\n</ul>\\n<h3 id=\\\"changes-version-99---another-visualquery-upgrade\\\">Changes Version 9.9 - another VisualQuery Upgrade</h3>\\n<ul>\\n<li>[x] Enhance relationship filter to enable filtering on other fields of related items</li>\\n<li>[x] Enhance other data sources with features which so far were not available in the visual designer</li>\\n</ul>\\n<h3 id=\\\"changes-version-910---combobox-and-more-datasources-wip\\\">Changes Version 9.10 - Combobox and more DataSources (WIP)</h3>\\n<ul>\\n<li>[x] Combobox input type allowing a&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/basics/data/fields/string-dropdown.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">dropdown with values</a>, but also allowing manual typing (to select pre-defined values, but also use Tokens)</li>\\n<li>[x]&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.StreamMerge.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Stream<wbr />Merge Data<wbr />Source</a></li>\\n<li>[x]&nbsp;<a class=\\\"xref text-break\\\" href=\\\"https://docs.2sxc.org/api/dot-net/ToSic.Eav.DataSources.ItemFilterDuplicates.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Item<wbr />Filter<wbr />Duplicates Data<wbr />Source</a></li>\\n<li>[x] feature to export Json ContentTypes</li>\\n<li>[x] multiple file-repos which deliver Content-Types, allows for any module to provide additional contenttypes</li>\\n</ul>\\n<h3 id=\\\"changes-version-911---query-picker--more-datasources\\\">Changes Version 9.11 - Query-Picker &amp; more DataSources</h3>\\n<ul>\\n<li>[x] Entity-Picker delivering items from a query, instead of a type</li>\\n<li>[x] string-dropdown-query to pick string-items from a query instead of pre-filled</li>\\n<li>[x] query export / import</li>\\n<li>[x] multi-select items in a string-query-picker</li>\\n</ul>\\n<h3 id=\\\"changes-version-912\\\">Changes Version 9.12</h3>\\n<ul>\\n<li>[x] Json-based global query definitions</li>\\n<li>[x] Method to add parameters to a called query (like when using an entity-pickers which uses a query)</li>\\n<li>[x] pre-build queries for things like zones, apps, content-types, fields, query-info etc.</li>\\n<li>[x] data sources for Zones, Apps, Queries, Attributes, etc.</li>\\n<li>[x] limit streams returned by a query</li>\\n</ul>\\n<h3 id=\\\"changes-version-913\\\">Changes Version 9.13</h3>\\n<ul>\\n<li>[x] Enhanced API to create custom DataSources + ca. 10 blog posts for that</li>\\n<li>[x] Standalone FnL / UDT DataSource (removed it from core distribution)</li>\\n</ul>\\n<h3 id=\\\"changes-version-914-lts\\\">Changes Version 9.14 LTS</h3>\\n<ul>\\n<li>[x] New LTS Concept - see&nbsp;<a href=\\\"https://2sxc.org/en/blog/post/special-edition-2sxc-9-14-lts-long-term-support\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">blog post about LTS 9.14</a></li>\\n</ul>\\n<h3 id=\\\"changes-version-915-942-lts\\\">Changes Version 9.15-9.42 LTS</h3>\\n<p>Didn't have time to document this yet, sorry. If you need to know, best check the git-history.</p>\\n<h2 id=\\\"breaking-changes-in-eav-and-2sxc-version-9\\\">Breaking Changes in EAV and 2sxc Version 9</h2>\\n<p>We try to minimize breaking changes, and most breaking changes won't affect your work, because it's internal API. We're documenting it here to ensure you know what happened, in case you still run into this.</p>\\n<h3 id=\\\"version-92000-2018-03-04\\\">Version 9.20.00 (2018-03-04)</h3>\\n<ol>\\n<li>Minor breaking change in ADAM properties, like&nbsp;<code>Id</code>&nbsp;instead of&nbsp;<code>FolderID</code>&nbsp;which was a leftover of Dnn naming.<br />see full&nbsp;<a href=\\\"https://2sxc.org/en/blog/post/working-with-the-breaking-change-adam-objects-2sxc-9-20\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">blog post</a></li>\\n</ol>\\n<h3 id=\\\"version-090800-2017-11-28\\\">Version 09.08.00 (2017-11-28)</h3>\\n<ol>\\n<li>Minor breaking change&nbsp;<code>List&lt;IEntity&gt;</code>&nbsp;instead of&nbsp;<code>Dictionary&lt;int, IEntity&gt;</code>&nbsp;on the&nbsp;<code>IDataSource</code><br />see full&nbsp;<a href=\\\"https://2sxc.org/en/blog/post/fixing-the-breaking-change-in-2sxc-9-8-list-instead-of-dictionary\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">blog post</a></li>\\n</ol>\\n<h3 id=\\\"version-090300-2017-10-08\\\">Version 09.03.00 (2017-10-08)</h3>\\n<ol>\\n<li>Breaking change on inconsistent naming&nbsp;<code>ToSic.Eav.IEntity</code>&nbsp;instead of&nbsp;<code>ToSic.Eav.Interfaces.IEntity</code>.<br />see full&nbsp;<a href=\\\"https://2sxc.org/en/blog/post/fixing-the-breaking-change-on-tosic-eav-ientity-in-2sxc-9-3\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">blog post</a></li>\\n</ol>\\n<hr />\\n<h2 id=\\\"changes-version-8\\\">Changes Version 8</h2>\\n<h3 id=\\\"changes-version-800---88\\\">Changes Version 8.00 - 8.8</h3>\\n<p>Didn't find time to document this :)</p>\\n<h3 id=\\\"changes-version-809\\\">Changes Version 8.09</h3>\\n<ul>\\n<li>[x] Very Rich Content (Inner Content 2.0)</li>\\n<li>[x] Item-Delete directly from in-page toolbar</li>\\n</ul>\\n<h3 id=\\\"changes-version-810\\\">Changes Version 8.10</h3>\\n<ul>\\n<li>[x] Shuffle data sources (to randomize items)</li>\\n<li>[x] Public (anonyomous) REST API for query and read/write content-items</li>\\n</ul>\\n<h3 id=\\\"changes-version-811-812\\\">Changes Version 8.11-8.12</h3>\\n<p>Mostly smaller bugfixes</p>\\n<hr />\\n<h2 id=\\\"version-1-7-2012-2016\\\">Version 1-7 (2012-2016)</h2>\\n<p>Didn't find time to document this :)</p>\"},\"Title\":{\"en-us\":\"Changes Overview for 2sxc/EAV\"},\"UrlKey\":{\"en-us\":\"post-64kb\"}},\"Hyperlink\":{\"Image\":{\"en-us\":\"\"}},\"Entity\":{\"Author\":{\"*\":[\"10cbff19-e313-4084-b569-4ded344111b2\"]},\"Categories\":{\"*\":[\"45435066-03bf-4c07-a701-15f5cc540c7e\"]},\"InnerContent\":{\"*\":[]},\"Tags\":{\"*\":[]}},\"DateTime\":{\"PublicationMoment\":{\"en-us\":\"2022-11-30T00:00:00Z\"}},\"Boolean\":{\"ShowOnStartPage\":{\"en-us\":true}}},\"Owner\":\"dnn:userid=1\"}}";
        private static void CompressionTest(CompressorType compressorType)
        {
            const int compressions = 100;

            var stopwatch = new Stopwatch();
            var compressor = new Compressor().InitCompressor(compressorType);
            var compress = compressor.Compress(JsonTest);

            stopwatch.Start();
            for (var i = 0; i < compressions; i++)
            {
                var compressor2 = new Compressor().InitCompressor(compressorType);
                compressor2.Compress(JsonTest);
            }
            stopwatch.Stop();

            Assert.Inconclusive($"Elapsed Time is {stopwatch.ElapsedMilliseconds} ms. Size compressed: {compress.Length}. Size uncompressed: {JsonTest.Length}.");
        }

        [TestMethod()]
        public void DeflateCompressionTest() => CompressionTest(CompressorType.Deflate);

        [TestMethod()]
        public void GZipCompressionTest() => CompressionTest(CompressorType.GZip);

        //[TestMethod()]
        //public void BrotliCompressionTest() => CompressionTest(CompressorType.Brotli);
    }
}